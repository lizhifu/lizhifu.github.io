---
layout: post
title:  "高并发大数据量下sql优化"
date:   2017-01-12 17:02:29
categories: sql 
tags: sql 并发
---

* content
{:toc}

在进行项目开发前，一个设计合理的数据库模型非常重要。前期设计时如果忽略了性能，在项目
到一半或者后期时再填坑会浪费非常多的时间。  
因此，在系统分析设计的阶段就应该考虑是否会有高并发大数据下的场景。  




## 使用简单的sql  
尽量避免在sql中出现order by，destinct，for update，以及判断语句如if、case等。最好把运算放在程序中，减少数据库计算的压力。  
避免出现!=、<>、in等，会导致系统全表扫描。


## 尽量减少对数据库的访问  
有时候增加表中数据字段冗余也是有必要的。  
比如基本信息中的一些热点字段，避免每次都查询一遍。  

## 增加索引   
应考虑到sql中where语句中的字段是否可以加索引，尽量避免索引过多。

## 减少不必要字段的查询   
查询需要的字段，避免用 select *，从而减少网络负担。  

## 避免大事务操作  
可以通过加入中间状态，即乐观锁的方式，避免加锁增加并发访问能力。   

## 优化数据类型  
多采用int提高查询、统计的速度。  

## 流式处理大数据  
数据量多大的情况下，使用limit限制查询出的数据，防止一次查询的数据过大。   
也可以采用增加限制条件的方法对数据循环处理。   


